webpackJsonp([24],{"5tKC":function(t,e,a){var i=a("Zs+Z");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("0e00301c",i,!0,{})},N7zN:function(t,e,a){"use strict";function i(t){a("5tKC")}Object.defineProperty(e,"__esModule",{value:!0});var s=a("yt7g"),n=a("S49b"),l={data:function(){return{users:[],filters:{title:"",code:""},total:0,page:1,listLoading:!1,dialogVisible:!1,cardinput:"",displayCard:!0,displaycardResult:!1,moreClick:!0,id:"",logoUrl:"",status:"",title:"",startTime:"",endTime:"",code:"",description:""}},methods:{consume_source:function(t,e){return"FROM_API"==t.consume_source?"API核销":"FROM_MP"==t.consume_source?"公众平台核销":"FROM_MOBILE_HELPER"==t.consume_source?"卡券商户助手核销":"未知"},update_time:function(t,e){return t.update_time=s.f.format(new Date(t.update_time),"yyyy-MM-dd hh:mm:ss")},dialogClick:function(){this.dialogVisible=!0,this.cardinput="",this.displayCard=!0},moreClick01:function(){this.displaycardResult=!0,this.moreClick=!1},moreClick02:function(){this.displaycardResult=!1,this.moreClick=!0},searchClick:function(){var t=this,e={code:this.cardinput};Object(n._14)(e).then(function(e){var a=e.status,i=e.message;200==a?(t.displayCard=!1,t.id=e.data.resultMap.id,t.logoUrl=e.data.resultMap.logoUrl,t.status=e.data.resultMap.status,t.title=e.data.resultMap.title,t.startTime=s.f.format(new Date(1e3*e.data.resultMap.startTime),"yyyy-MM-dd"),t.endTime=s.f.format(new Date(1e3*e.data.resultMap.endTime),"yyyy-MM-dd"),t.code=e.data.resultMap.code,t.description=e.data.resultMap.description):t.$message.error(i)})},submitClick:function(){var t=this,e={id:this.id,code:this.cardinput};Object(n.q)(e).then(function(e){var a=e.status,i=e.message;200==a?(t.dialogVisible=!1,t.getUsers(),t.$notify({title:"成功",message:i,type:"success"})):t.$notify.error({title:"错误",message:i})})},handleCurrentChange:function(t){this.page=t,this.getList()},getUsers:function(){this.page=1,this.getList()},getList:function(){var t=this;this.listLoading=!0;var e={pagNum:this.page,title:this.filters.title,code:this.filters.code};Object(n._16)(e).then(function(e){t.total=e.data.total,t.users=e.data.CouponList,t.listLoading=!1})},uploadWinxin:function(t,e){var a=this,i={id:e.id};uploadCreatCard(i).then(function(t){var e=t.status,i=t.message;200==e?(a.$notify({title:"成功",message:i,type:"success"}),a.getUsers()):a.$notify.error({title:"错误",message:i})})}},mounted:function(){this.getUsers()}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",[a("el-row",[a("el-form",{ref:"filters",attrs:{inline:!0,model:t.filters}},[a("el-form-item",{attrs:{prop:"title"}},[a("el-input",{attrs:{placeholder:"请输入卡券名称"},model:{value:t.filters.title,callback:function(e){t.$set(t.filters,"title",e)},expression:"filters.title"}})],1),t._v(" "),a("el-form-item",{attrs:{prop:"code"}},[a("el-input",{attrs:{placeholder:"请输入卡券号码"},model:{value:t.filters.code,callback:function(e){t.$set(t.filters,"code",e)},expression:"filters.code"}})],1),t._v(" "),a("el-form-item",{staticStyle:{float:"right"}},[a("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:t.getUsers}},[t._v("查询")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:t.dialogClick}},[t._v("核销卡券")])],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"卡券核销",visible:t.dialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-input",{staticClass:"nav4_tab5_input",attrs:{placeholder:"请输入卡券号"},model:{value:t.cardinput,callback:function(e){t.cardinput=e},expression:"cardinput"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchClick},slot:"append"})],1),t._v(" "),t.displayCard?a("el-row",{staticClass:"cardinput",attrs:{gutter:50}},[a("el-col",{attrs:{span:8}},[a("img",{attrs:{src:"http://s.404.cn/tpl/static/card/images/new/demo_card.png",alt:"示例",width:"100%"}})]),t._v(" "),a("el-col",{attrs:{span:16}},[a("el-steps",{attrs:{space:120,direction:"vertical",active:1}},[a("el-step",{attrs:{title:"搜索卡券",description:"请顾客出示卡券，输入卡券号"}}),t._v(" "),a("el-step",{attrs:{title:"校检",description:"微信提供有效期验证，其他信息请自行核对"}}),t._v(" "),a("el-step",{attrs:{title:"销券完成",description:"查看销券结果，顾客将同时收到销券成功通知"}})],1)],1)],1):a("div",{staticClass:"cardResult"},[a("div",{staticClass:"cardResult-top"},[a("img",{attrs:{src:t.logoUrl,alt:"",width:"118px"}}),t._v(" "),a("div",{staticClass:"card_contract"},[a("span",[t._v(t._s(1==t.status?"可核销":"已失效"))]),t._v(" "),t.moreClick?a("el-button",{staticStyle:{float:"right","padding-right":"15px"},attrs:{type:"text"},on:{click:t.moreClick01}},[t._v("展开更多"),a("i",{staticClass:"el-icon-caret-bottom"})]):a("el-button",{staticStyle:{float:"right","padding-right":"15px"},attrs:{type:"text"},on:{click:t.moreClick02}},[t._v("收起更多"),a("i",{staticClass:"el-icon-caret-top"})]),t._v(" "),a("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.title))]),t._v(" "),a("p",[a("span",[t._v("有效期：")]),t._v(t._s(t.startTime)+"至"+t._s(t.endTime))]),t._v(" "),a("p",[a("span",[t._v("序列号：")]),t._v(t._s(t.code))])],1)]),t._v(" "),a("i",{staticStyle:{width:"100%",height:"1px",display:"block","background-color":"#bfcbd9"}}),t._v(" "),t.displaycardResult?a("div",{staticClass:"cardResult-center"},[a("p",[t._v("使用须知："),a("span",{staticStyle:{"font-weight":"normal"}},[t._v(t._s(t.description))])])]):t._e(),t._v(" "),a("span",{staticStyle:{"margin-left":"45%"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.submitClick}},[t._v("确定销券")]),t._v(" "),a("p",{staticStyle:{"text-align":"center"}},[t._v("卡券核销后不可撤回")])],1)])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.users,"highlight-current-row":"",border:""}},[a("el-table-column",{attrs:{prop:"code",label:"卡券号","min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"卡券名称","min-width":"140"}}),t._v(" "),a("el-table-column",{attrs:{prop:"store_name",label:"门店","min-width":"190"}}),t._v(" "),a("el-table-column",{attrs:{prop:"consume_source",label:"核销方式",formatter:t.consume_source,"min-width":"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"update_time",label:"时间",formatter:t.update_time,"min-width":"160"}})],1)],1),t._v(" "),a("el-row",[a("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","current-page":t.page,"page-size":20,total:t.total,background:""},on:{"current-change":t.handleCurrentChange}})],1)],1)},o=[],d={render:r,staticRenderFns:o},c=d,p=a("VU/8"),u=i,m=p(l,c,!1,u,"data-v-66000dd2",null);e.default=m.exports},"Zs+Z":function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.demo-table-expand[data-v-66000dd2] {\n\tfont-size: 0;\n}\n.demo-table-expand label[data-v-66000dd2] {\n\twidth: 90px;\n\tcolor: #99a9bf;\n}\n.demo-table-expand .el-form-item[data-v-66000dd2] {\n\tmargin-right: 0;\n\tmargin-bottom: 0;\n\twidth: 50%;\n}\n.cardinput[data-v-66000dd2]{\n  padding-top: 50px;\n}\n.cardResult[data-v-66000dd2]{\n\tmargin-top: 50px;\n\tborder: 1px solid #bfcbd9;\n\tdisplay: inline-table;\n\twidth: 100%;\n\tborder-radius: 4px;\n}\n.cardResult-top[data-v-66000dd2]{\n\twidth: 100%;\n}\n.cardResult-top img[data-v-66000dd2]{\n\tpadding: 15px;\n\tfloat: left;\n}\n.card_contract[data-v-66000dd2]{\n\ttext-align: center;\n\tpadding-top: 15px;\n}\n.card_contract span[data-v-66000dd2]{\n\tfont-weight: bold;\n}\n.card_contract p[data-v-66000dd2]{\n\ttext-align: left;\n}\n.cardResult-center[data-v-66000dd2]{\n\tpadding: 15px;\n}\n.cardResult-center p[data-v-66000dd2]{\n\tfont-weight: bold;\n}\n",""])}});