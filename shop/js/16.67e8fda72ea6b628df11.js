webpackJsonp([16],{Pz9y:function(e,t,r){var a=r("SzI3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("rjj0")("5f1ad628",a,!0,{})},SzI3:function(e,t,r){t=e.exports=r("FZ+f")(!1),t.push([e.i,"\n.bill1-top{\n  padding: 0 25px;\n  border-bottom: 1px solid #eee;\n  margin-bottom: 15px;\n}\n.demo-ruleForm{\n  padding: 0 25px;\n  width: 750px;\n  margin: auto;\n}\n",""])},peW0:function(e,t,r){"use strict";function a(e){r("Pz9y")}Object.defineProperty(t,"__esModule",{value:!0});var o=r("yt7g"),l=r("KpZF"),n=r("S49b"),i={data:function(){var e=this,t=new Date;return{pickerOptions1:{disabledDate:function(e){if(e.getTime()>Date.now()-864e5)return!0}},pickerOptions2:{disabledDate:function(t){var r=Date.parse(new Date(o.f.format(new Date(e.ruleForm.startTime),"yyyy-MM-dd")));if(t.getTime()>r+7776e6||t.getTime()<r-864e5||t.getTime()>Date.now()-864e5)return!0}},selectLoading:!1,dateType:"datetime",optionsStore:[],optionsEmp:[],searchLoading:!1,empSearchLoading:!1,ruleForm:{parag:"",excel_type:"od",accountType:"0",recsonId:"",storeName:"",empName:"",startTime:new Date(t.getFullYear(),t.getMonth(),t.getDate()-1),endTime:new Date(t.getFullYear(),t.getMonth(),t.getDate()-1,23,59,59)},rules:{endTime:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}]},optionsExcel:[{value:"od",label:"交易明细"},{value:"sd",label:"门店日汇总"},{value:"ss",label:"门店汇总"}],optionsPayType:[{value:"0",label:"支付"},{value:"1",label:"退款"},{value:"ALL",label:"所有"}],optionsScene:l.e}},computed:{excel_type:function(){return this.ruleForm.excel_type}},watch:{excel_type:function(e,t){var r=new Date(this.ruleForm.endTime);"od"!==e?(this.ruleForm.accountType="0",this.dateType="date",this.ruleForm.empName=""):(this.dateType="datetime",this.ruleForm.endTime=new Date(r.getFullYear(),r.getMonth(),r.getDate(),23,59,59))}},methods:{changTime:function(e){var t=Date.parse(new Date(o.f.format(new Date(this.ruleForm.endTime),"yyyy-MM-dd")));Date.parse(new Date(o.f.format(new Date(e),"yyyy-MM-dd")))<t-7776e6&&(this.ruleForm.endTime="")},clickEmp:function(){var e=this;this.empSearchLoading=!0;var t={mid:sessionStorage.getItem("mid"),storeId:String(this.ruleForm.storeName),ename:""};Object(n._46)(t).then(function(t){e.empSearchLoading=!1;var r=(t.status,t.data);e.optionsEmp=r.emplyeeList})},remoteEmp:function(e){var t=this;""!==e?(this.empSearchLoading=!0,setTimeout(function(){t.empSearchLoading=!1;var r={mid:sessionStorage.getItem("mid"),storeId:String(t.ruleForm.storeName),ename:e};Object(n._46)(r).then(function(e){var r=(e.status,e.data);t.optionsEmp=r.emplyeeList})},200)):this.optionsEmp=[]},selectStoreChange:function(){this.ruleForm.empName=""},clickShop:function(){var e=this;this.searchLoading=!0,Object(n._48)().then(function(t){e.searchLoading=!1;var r=(t.status,t.data);e.optionsStore=r.storeList})},remoteShop:function(e){var t=this;""!==e?(this.searchLoading=!0,setTimeout(function(){t.searchLoading=!1,Object(n._48)({sname:e}).then(function(e){var r=(e.status,e.data);t.optionsStore=r.storeList})},200)):this.optionsStore=[]},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(e){var r={mid:sessionStorage.getItem("mid"),order_type:String(t.ruleForm.accountType),payWay:t.ruleForm.recsonId,startTime:t.ruleForm.startTime,endTime:t.ruleForm.endTime,storeId:String(t.ruleForm.storeName),eid:String(t.ruleForm.empName),excel_type:t.ruleForm.excel_type};r.startTime=r.startTime&&""!=r.startTime?String(Date.parse(o.f.format(new Date(r.startTime),"yyyy-MM-dd hh:mm:ss"))):"",r.endTime=r.endTime&&""!=r.endTime?String(Date.parse(o.f.format(new Date(r.endTime),"yyyy-MM-dd hh:mm:ss"))):"",Object(n.m)(r).then(function(e){200===e.data.status&&(window.location.href=e.data.data)})}})}}},s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{},[e._m(0),e._v(" "),r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[r("el-row",[r("el-form-item",{attrs:{label:"账单类型"}},[r("el-radio-group",{model:{value:e.ruleForm.excel_type,callback:function(t){e.$set(e.ruleForm,"excel_type",t)},expression:"ruleForm.excel_type"}},e._l(e.optionsExcel,function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"交易类型"}},[r("el-radio-group",{attrs:{disabled:"od"!==e.ruleForm.excel_type},model:{value:e.ruleForm.accountType,callback:function(t){e.$set(e.ruleForm,"accountType",t)},expression:"ruleForm.accountType"}},e._l(e.optionsPayType,function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"支付方式"}},[r("el-radio-group",{model:{value:e.ruleForm.recsonId,callback:function(t){e.$set(e.ruleForm,"recsonId",t)},expression:"ruleForm.recsonId"}},e._l(e.optionsScene,function(t){return r("el-radio",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"门店名称"}},[r("el-select",{attrs:{placeholder:"门店名称",multiple:!1,filterable:"",remote:"","remote-method":e.remoteShop,loading:e.searchLoading,clearable:""},on:{focus:e.clickShop,change:e.selectStoreChange},model:{value:e.ruleForm.storeName,callback:function(t){e.$set(e.ruleForm,"storeName",t)},expression:"ruleForm.storeName"}},e._l(e.optionsStore,function(e){return r("el-option",{key:e.id,attrs:{value:e.id,label:e.value}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"款台名称"}},[r("el-select",{attrs:{placeholder:"款台名称",disabled:"od"!==e.ruleForm.excel_type,multiple:!1,filterable:"",remote:"","remote-method":e.remoteEmp,loading:e.empSearchLoading,clearable:""},on:{focus:e.clickEmp},model:{value:e.ruleForm.empName,callback:function(t){e.$set(e.ruleForm,"empName",t)},expression:"ruleForm.empName"}},e._l(e.optionsEmp,function(e){return r("el-option",{key:e.eid,attrs:{value:e.eid,label:e.value}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"选择时间",prop:"resource"}},[r("el-date-picker",{attrs:{editable:!1,clearable:!1,type:e.dateType,"picker-options":e.pickerOptions1,placeholder:"选择日期"},on:{change:e.changTime},model:{value:e.ruleForm.startTime,callback:function(t){e.$set(e.ruleForm,"startTime",t)},expression:"ruleForm.startTime"}})],1)],1),e._v(" "),r("el-col",{attrs:{span:1}},[r("el-form-item",{attrs:{"label-width":"0"}},[e._v("\n           至\n        ")])],1),e._v(" "),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"",prop:"endTime","label-width":"0px"}},[r("el-date-picker",{attrs:{editable:!1,clearable:!1,type:e.dateType,"picker-options":e.pickerOptions2,placeholder:"选择日期"},model:{value:e.ruleForm.endTime,callback:function(t){e.$set(e.ruleForm,"endTime",t)},expression:"ruleForm.endTime"}})],1)],1)],1),e._v(" "),r("el-row",[r("el-form-item",{attrs:{label:"注："}},[r("span",{staticStyle:{color:"#999"}},[e._v("每次下载区间最多为3个月。如果下载出现乱码，请选择office2003打开")])])],1),e._v(" "),r("el-row",[r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即下载")])],1)],1)],1)],1)},m=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"bill1-top"},[r("h3",[e._v("交易账单")])])}],c={render:s,staticRenderFns:m},u=c,p=r("VU/8"),d=a,f=p(i,u,!1,d,null,null);t.default=f.exports}});