webpackJsonp([25],{"4K3x":function(e,t,o){"use strict";function r(e){o("7z+K")}Object.defineProperty(t,"__esModule",{value:!0});var n=(o("yt7g"),o("S49b")),i=o("bGai"),a={components:{Tinymce:i.e},data:function(){return{uploadimg:n._79,postForm:{title:"",newsType:"",miniinfoType:"",url:"",imageUrl:"",content:"Hello,word"},newsOptions:[{value:"1",label:"新闻"},{value:"2",label:"公告"}],miniinfoOptions:[]}},methods:{clickReturn:function(){this.$router.go(-1)},submitForm:function(e){var t=this;this.$refs[e].validate(function(o){if(!o)return console.log("error submit!!"),!1;var r={appid:t.postForm.miniinfoType,title:t.postForm.title,title_url:t.postForm.url,title_contents:t.postForm.content,title_type:t.postForm.newsType,image:t.postForm.imageUrl};Object(n.e)(r).then(function(o){200===o.status&&(t.$refs[e].resetFields(),t.$router.push({path:"/index4/miniprogram4"}),t.$message({message:o.message,type:"success"}))})})},getNewsDetail:function(){var e=this,t={id:this.$route.query.id};Object(n.I)(t).then(function(t){200===t.status&&(e.postForm.title=t.data.title,e.postForm.newsType=String(t.data.title_type),e.postForm.miniinfoType=t.data.appid,t.data.title_url?e.postForm.url=t.data.title_url:e.postForm.content=t.data.title_contents)})},getMiniinfo:function(){var e=this;Object(n._47)().then(function(t){200===t.status&&(e.miniinfoOptions=t.data.miniMenu)})},handleAvatarSuccess:function(e,t){this.postForm.imageUrl=e.data.locationPath},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,o=e.size/1024/1024<1;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),o||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&o}},mounted:function(){this.getMiniinfo(),this.$route.query.id&&this.getNewsDetail()}},s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-form",{ref:"postForm",attrs:{inline:!0,"label-position":"left",model:e.postForm,"label-width":"95px"}},[o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"文章标题",prop:"title",rules:[{required:!0,message:"请输入文章标题",trigger:"blur"}]}},[o("el-input",{attrs:{maxlength:"40"},model:{value:e.postForm.title,callback:function(t){e.$set(e.postForm,"title",t)},expression:"postForm.title"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"文章类型",prop:"newsType",rules:[{required:!0,message:"请选择文章类型",trigger:"change"}]}},[o("el-select",{attrs:{placeholder:"请选择文章类型"},model:{value:e.postForm.newsType,callback:function(t){e.$set(e.postForm,"newsType",t)},expression:"postForm.newsType"}},e._l(e.newsOptions,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"小程序",prop:"miniinfoType",rules:[{required:!0,message:"请选择小程序",trigger:"change"}]}},[o("el-select",{attrs:{placeholder:"请选择小程序"},model:{value:e.postForm.miniinfoType,callback:function(t){e.$set(e.postForm,"miniinfoType",t)},expression:"postForm.miniinfoType"}},e._l(e.miniinfoOptions,function(e){return o("el-option",{key:e.appid,attrs:{label:e.appname,value:e.appid}})}))],1)],1)],1),e._v(" "),o("el-row",[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"公众号链接"}},[o("el-input",{model:{value:e.postForm.url,callback:function(t){e.$set(e.postForm,"url",t)},expression:"postForm.url"}})],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"预览图",prop:"imageUrl",rules:[{required:!0,message:"请上传预览图",trigger:"change"}]}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadimg,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload}},[e.postForm.imageUrl?o("img",{staticClass:"avatar",attrs:{src:e.postForm.imageUrl}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),e._v(" "),o("el-col",{attrs:{span:8}},[o("el-form-item",[o("el-button",{attrs:{type:"success"},on:{click:function(t){e.submitForm("postForm")}}},[e._v("保存")]),e._v(" "),o("el-button",{attrs:{type:"warning"},on:{click:function(t){e.clickReturn("postForm")}}},[e._v("返回")])],1)],1)],1),e._v(" "),o("Tinymce",{ref:"editor",model:{value:e.postForm.content,callback:function(t){e.$set(e.postForm,"content",t)},expression:"postForm.content"}})],1)],1)},l=[],p={render:s,staticRenderFns:l},c=p,u=o("VU/8"),m=r,d=u(a,c,!1,m,"data-v-65e471e3",null);t.default=d.exports},"7z+K":function(e,t,o){var r=o("EVfi");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("02e3df8c",r,!0,{})},EVfi:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,"\n.avatar-uploader[data-v-65e471e3] {\n  border: 1px dashed #d9d9d9;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n  width: 75px;\n  height: 55px;\n}\n.avatar-uploader[data-v-65e471e3]:hover {\n  border-color: #409EFF;\n}\n.avatar-uploader-icon[data-v-65e471e3] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 75px;\n  line-height: 55px;\n  text-align: center;\n  background: #fff;\n}\n.avatar[data-v-65e471e3] {\n  width: 75px;\n  height: 55px;\n}\n\n",""])}});