webpackJsonp([28],{AyPl:function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"\n.qr_div[data-v-583f29fc]{\n  text-align: center\n}\n.qr_img[data-v-583f29fc]{\n  width: 200px;\n}\n\n",""])},"Qw+J":function(e,t,i){var n=i("AyPl");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("68da930a",n,!0,{})},z6F5:function(e,t,i){"use strict";function n(e){i("Qw+J")}Object.defineProperty(t,"__esModule",{value:!0});var o=i("woOf"),a=i.n(o),s=(i("yt7g"),i("S49b")),r={data:function(){return{filters:{eid:"",otpCode:""},optionsEmp:[],equipmentOptionsEmp:[],users:[],total:1,page:1,listLoading:!1,empSearchLoading:!1,equipmentEmpSearchLoading:!1,equipmentDialogVisible:!1,equipmentBool:!1,equipmentForm:{yubaoName:"",yubaoCode:"",eid:""},qrDialogVisible:!1,qrImg:""}},methods:{equipmentDialogClosed:function(e){this.$refs.equipmentForm.resetFields()},downloadQr:function(){window.location.href=this.qrImg},equipmentQr:function(e,t){t.mid,t.storeId,t.eid;this.qrDialogVisible=!0,this.qrImg=s.F+"?mid="+t.mid+"&sid="+t.storeId+"&eid="+t.eid},equipmentEdit:function(e){var t=this;this.$refs[e].validate(function(i){if(i){var n={id:t.equipmentForm.id,printname:t.equipmentForm.yubaoName,machineCode:t.equipmentForm.yubaoCode,punm:t.equipmentForm.punm,eid:t.equipmentForm.eid};Object(s._76)(n).then(function(i){200===i.status&&(t.$message({message:i.message,type:"success"}),t.equipmentDialogVisible=!1,t.$refs[e].resetFields(),t.getList())})}})},handleEdit:function(e,t){this.equipmentDialogVisible=!0,this.equipmentBool=!0,this.equipmentClickEmp();var i=a()({},t);this.equipmentForm.yubaoName=i.printname,this.equipmentForm.yubaoCode=i.machineCode,this.equipmentForm.punm=i.pnum,this.equipmentForm.eid=i.eid,this.equipmentForm.id=i.id},equipmentSubmile:function(e){var t=this;this.$refs[e].validate(function(i){if(i){var n=t.equipmentForm;Object(s.i)(n).then(function(i){200===i.status&&(t.$message({message:i.message,type:"success"}),t.equipmentDialogVisible=!1,t.$refs[e].resetFields(),t.getList())})}})},handleAdd:function(){this.equipmentDialogVisible=!0,this.equipmentBool=!1,this.equipmentForm={}},equipmentClickEmp:function(){var e=this;this.equipmentEmpSearchLoading=!0;var t={mid:sessionStorage.getItem("mid"),ename:""};Object(s._46)(t).then(function(t){e.equipmentEmpSearchLoading=!1;var i=(t.status,t.data);e.equipmentOptionsEmp=i.emplyeeList})},equipmentRemoteEmp:function(e){var t=this;""!==e?(this.equipmentEmpSearchLoading=!0,setTimeout(function(){t.equipmentEmpSearchLoading=!1;var i={mid:sessionStorage.getItem("mid"),ename:e};Object(s._46)(i).then(function(e){var i=(e.status,e.data);t.equipmentOptionsEmp=i.emplyeeList})},200)):this.equipmentOptionsEmp=[]},clickEmp:function(){var e=this;this.empSearchLoading=!0;var t={mid:sessionStorage.getItem("mid"),ename:""};Object(s._46)(t).then(function(t){e.empSearchLoading=!1;var i=(t.status,t.data);e.optionsEmp=i.emplyeeList})},remoteEmp:function(e){var t=this;""!==e?(this.empSearchLoading=!0,setTimeout(function(){t.empSearchLoading=!1;var i={mid:sessionStorage.getItem("mid"),ename:e};Object(s._46)(i).then(function(e){var i=(e.status,e.data);t.optionsEmp=i.emplyeeList})},200)):this.optionsEmp=[]},handleCurrentChange:function(e){this.page=e,this.getList()},getUsers:function(){this.page=1,this.getList()},getList:function(){var e=this,t={pageNum:this.page.toString(),eid:this.filters.eid.toString(),otpCode:this.filters.otpCode};this.listLoading=!0,Object(s._42)(t).then(function(t){var i=t.status;t.message;200==i&&(e.total=t.data.totalCount,e.users=t.data.printList),e.listLoading=!1})}},mounted:function(){this.getUsers()}},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-row",[i("el-form",{attrs:{inline:!0,model:e.filters}},[i("el-form-item",[i("el-input",{attrs:{placeholder:"请输入设备编号"},model:{value:e.filters.otpCode,callback:function(t){e.$set(e.filters,"otpCode","string"==typeof t?t.trim():t)},expression:"filters.otpCode"}})],1),e._v(" "),i("el-form-item",{staticClass:"fixed_search_input",attrs:{prop:"empName"}},[i("el-select",{attrs:{placeholder:"款台名称",multiple:!1,filterable:"",remote:"","remote-method":e.remoteEmp,loading:e.empSearchLoading,clearable:""},on:{focus:e.clickEmp},model:{value:e.filters.eid,callback:function(t){e.$set(e.filters,"eid",t)},expression:"filters.eid"}},e._l(e.optionsEmp,function(e){return i("el-option",{key:e.eid,attrs:{value:e.eid,label:e.value}})}))],1),e._v(" "),i("el-form-item",{staticStyle:{float:"right"}},[i("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:e.getUsers}},[e._v("查询")]),e._v(" "),i("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:e.handleAdd}},[e._v("新增")])],1)],1)],1),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.users,border:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"printname",label:"设备名称","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"ename",label:"款台名称","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"machineCode",label:"设备编号","min-width":"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"pnum",label:"设备支付成功次数","min-width":"160"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.equipmentQr(t.$index,t.row)}}},[e._v("设备二维码")]),e._v(" "),i("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[e._v("修改")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"设备二维码",visible:e.qrDialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.qrDialogVisible=t}}},[i("div",{staticClass:"qr_div"},[i("div",[i("img",{staticClass:"qr_img",attrs:{src:e.qrImg,alt:"二维码"}})]),e._v(" "),i("el-button",{attrs:{type:"text"},on:{click:e.downloadQr}},[e._v("下载二维码")])],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.qrDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.qrDialogVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.equipmentBool?"修改设备":"添加设备",visible:e.equipmentDialogVisible,width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.equipmentDialogVisible=t},close:e.equipmentDialogClosed}},[i("el-form",{ref:"equipmentForm",attrs:{model:e.equipmentForm,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"设备名称",prop:"yubaoName",rules:[{required:!0,message:"请输入设备名称",trigger:"blur"}]}},[i("el-input",{model:{value:e.equipmentForm.yubaoName,callback:function(t){e.$set(e.equipmentForm,"yubaoName","string"==typeof t?t.trim():t)},expression:"equipmentForm.yubaoName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"设备编号",prop:"yubaoCode",rules:[{required:!0,message:"请输入设备编号",trigger:"blur"}]}},[i("el-input",{model:{value:e.equipmentForm.yubaoCode,callback:function(t){e.$set(e.equipmentForm,"yubaoCode","string"==typeof t?t.trim():t)},expression:"equipmentForm.yubaoCode"}})],1),e._v(" "),e.equipmentBool?i("el-form-item",{attrs:{label:"支付次数",prop:"punm",rules:[{required:!0,message:"请输入设备支付成功次数",trigger:"blur"}]}},[i("el-input",{model:{value:e.equipmentForm.punm,callback:function(t){e.$set(e.equipmentForm,"punm","string"==typeof t?t.trim():t)},expression:"equipmentForm.punm"}})],1):e._e(),e._v(" "),i("el-form-item",{attrs:{label:"选择款台",prop:"eid",rules:[{required:!0,message:"请选择款台",trigger:"change"}]}},[i("el-select",{attrs:{placeholder:"款台名称",multiple:!1,filterable:"",remote:"","remote-method":e.equipmentRemoteEmp,loading:e.equipmentEmpSearchLoading,clearable:""},on:{focus:e.equipmentClickEmp},model:{value:e.equipmentForm.eid,callback:function(t){e.$set(e.equipmentForm,"eid",t)},expression:"equipmentForm.eid"}},e._l(e.equipmentOptionsEmp,function(e){return i("el-option",{key:e.eid,attrs:{value:e.eid,label:e.value}})}))],1)],1),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.equipmentDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),e.equipmentBool?i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.equipmentEdit("equipmentForm")}}},[e._v("修 改")]):i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.equipmentSubmile("equipmentForm")}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-row",[i("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","page-size":20,total:e.total,background:""},on:{"current-change":e.handleCurrentChange}})],1)],1)},m=[],u={render:l,staticRenderFns:m},p=u,d=i("VU/8"),c=n,g=d(r,p,!1,c,"data-v-583f29fc",null);t.default=g.exports}});