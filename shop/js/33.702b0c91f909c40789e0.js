webpackJsonp([33],{"1YGp":function(n,t,e){"use strict";function a(n){e("ljps")}Object.defineProperty(t,"__esModule",{value:!0});var r=e("woOf"),i=e.n(r),o=e("yt7g"),l=e("S49b"),s={data:function(){return{uploadImage:l._80,uploaddata:{mid:""},filters:{name:"",status:""},options:[{value:"Y",label:"上架商品"},{value:"N",label:"下架商品"}],users:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{name:[{required:!0,message:"请输入姓名",trigger:"blur"}]},loading:!1,optionsCard:[],editForm:{name:"",small_url:"",pic_url:"",card:"",oprice:"",nprice:"",vprice:"0.00",stock:"",start_time:"",end_time:"",depict:"",rule:""},addFormVisible:!1,addLoading:!1,addFormRules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"}],oprice:[{required:!0,message:"请输入商品原价",trigger:"blur"}],nprice:[{required:!0,message:"请输入商品现价",trigger:"blur"}],vprice:[{required:!0,message:"请输入商品会员价",trigger:"blur"}],stock:[{required:!0,message:"请输入商品库存",trigger:"blur"}],desc:[{required:!0,message:"请输入商品描述",trigger:"blur"}],rule:[{required:!0,message:"请输入兑换规则",trigger:"blur"}]},addForm:{name:"",small_url:"",pic_url:"",card_id:"",oprice:"",nprice:"",vprice:"0.00",stock:"",start_time:"",end_time:"",desc:"",rule:""}}},methods:{format_oprice:function(n,t){return o.i(n.oprice,2,".",",")},format_nprice:function(n,t){return o.i(n.nprice,2,".",",")},clickCard:function(){var n=this;Object(l.D)({title:""}).then(function(t){var e=(t.status,t.data);n.optionsCard=e.CouponList})},remoteCard:function(n){var t=this;""!==n?(this.loading=!0,setTimeout(function(){t.loading=!1,Object(l.D)({title:n}).then(function(n){var e=(n.status,n.data);t.optionsCard=e.CouponList})},200)):this.optionsMers=[]},small_urlSuccess:function(n,t){this.addForm.small_url=n.data.locationUrl,this.editForm.small_url=n.data.locationUrl},pic_urlSuccess:function(n,t){this.addForm.pic_url=n.data.locationUrl,this.editForm.pic_url=n.data.locationUrl},beforeAvatarUpload:function(n){var t="image/jpeg"===n.type,e=n.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),e||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&e},handleCurrentChange:function(n){this.page=n,this.getList()},test:function(n,t){var e=this;this.$confirm("此操作将修改商品状态, 确定修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(function(){var n={id:t.id,status:1==t.status?"Y":0==t.status?"N":"未知"};Object(l._72)(n).then(function(n){200==n.status?e.$message({type:"success",message:"修改成功!"}):e.$message({type:"success",message:"修改失败!"})})}).catch(function(){e.getUsers(),e.$message({type:"info",message:"取消修改"})})},getUsers:function(){this.page=1,this.getList()},getList:function(){var n=this,t={pagNum:this.page,name:this.filters.name,status:this.filters.status};this.listLoading=!0,Object(l._34)(t).then(function(t){n.total=t.data.total,n.users=t.data.productList,n.listLoading=!1;for(var e,a=0;a<n.users.length;a++)e=n.users[a],"Y"==e.status?e.status=!0:e.status=!1})},handleEdit:function(n,t){this.editFormVisible=!0,this.editForm=i()({},t)},handleAdd:function(){this.addFormVisible=!0},editSubmit:function(n,t){var e=this;this.$refs.editForm.validate(function(n){n&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var n={id:String(e.editForm.id),name:String(e.editForm.name),small_url:String(e.editForm.small_url),pic_url:String(e.editForm.pic_url),oprice:String(e.editForm.oprice),nprice:String(e.editForm.nprice),stock:String(e.editForm.stock),start_time:"",end_time:"",desc:String(e.editForm.depict),rule:String(e.editForm.rule)};Object(l._70)(n).then(function(n){var t=n.status,a=n.message;200==t?(e.$notify({title:"成功",message:a,type:"success"}),e.$refs.editForm.resetFields(),e.editFormVisible=!1,e.getUsers()):e.$notify.error({title:"错误",message:a}),e.editLoading=!1})})})},addSubmit:function(){var n=this;this.$refs.addForm.validate(function(t){t&&n.$confirm("确认提交吗？","提示",{}).then(function(){n.addLoading=!0;var t=i()({},n.addForm);Object(l.Y)(t).then(function(t){var e=t.status,a=t.message;200==e?(n.$notify({title:"成功",message:a,type:"success"}),n.$refs.addForm.resetFields(),n.addFormVisible=!1,n.getUsers()):n.$notify.error({title:"错误",message:a}),n.addLoading=!1})})})}},mounted:function(){this.getUsers(),this.uploaddata.mid=sessionStorage.getItem("mid")}},d=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("section",[e("el-row",[e("el-form",{attrs:{inline:!0,model:n.filters}},[e("el-form-item",[e("el-input",{attrs:{placeholder:"商品名称"},model:{value:n.filters.name,callback:function(t){n.$set(n.filters,"name",t)},expression:"filters.name"}})],1),n._v(" "),e("el-form-item",[[e("el-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:n.filters.status,callback:function(t){n.$set(n.filters,"status",t)},expression:"filters.status"}},n._l(n.options,function(n){return e("el-option",{key:n.value,attrs:{label:n.label,value:n.value}})}))]],2),n._v(" "),e("el-form-item",{staticStyle:{float:"right"}},[e("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.getUsers}},[n._v("查询")]),n._v(" "),e("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.handleAdd}},[n._v("新增商品")])],1)],1)],1),n._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}]},[e("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:n.users,"highlight-current-row":""}},[e("el-table-column",{attrs:{prop:"name",label:"商品名称","min-width":"180"}}),n._v(" "),e("el-table-column",{attrs:{prop:"oprice",label:"商品原价","min-width":"120",formatter:n.format_oprice}}),n._v(" "),e("el-table-column",{attrs:{prop:"nprice",label:"商品现价","min-width":"120",formatter:n.format_nprice}}),n._v(" "),e("el-table-column",{attrs:{prop:"stock",label:"库存","min-width":"120"}}),n._v(" "),e("el-table-column",{attrs:{prop:"stock",label:"状态",width:"85"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-switch",{attrs:{name:"value"},on:{change:function(e){n.test(t.$index,t.row)}},model:{value:t.row.status,callback:function(e){n.$set(t.row,"status",e)},expression:"scope.row.status"}})]}}])}),n._v(" "),e("el-table-column",{attrs:{label:"操作",width:"85"},scopedSlots:n._u([{key:"default",fn:function(t){return[e("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(e){n.handleEdit(t.$index,t.row)}}},[n._v("编辑")])]}}])})],1)],1),n._v(" "),e("el-row",[e("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","current-page":n.page,"page-size":20,total:n.total,background:""},on:{"current-change":n.handleCurrentChange}})],1),n._v(" "),e("el-dialog",{attrs:{title:"编辑",visible:n.editFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){n.editFormVisible=t}}},[e("el-form",{ref:"editForm",attrs:{model:n.editForm,"label-width":"120px",rules:n.editFormRules}},[e("el-form-item",{attrs:{label:"商户名称：",prop:"name"}},[e("el-input",{staticStyle:{width:"200px"},attrs:{"auto-complete":"off"},model:{value:n.editForm.name,callback:function(t){n.$set(n.editForm,"name",t)},expression:"editForm.name"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品缩略图：",prop:"small_url"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadImage,data:n.uploaddata,"show-file-list":!1,"on-success":n.small_urlSuccess,"before-upload":n.beforeAvatarUpload}},[e("img",{staticStyle:{width:"50px",height:"50px",float:"left"},attrs:{src:n.editForm.small_url}}),n._v(" "),e("el-button",{staticStyle:{float:"right","margin-left":"15px"},attrs:{size:"small",type:"primary"}},[n._v("点击上传")])],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"商品详情图：",prop:"pic_url"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadImage,data:n.uploaddata,"show-file-list":!1,"on-success":n.pic_urlSuccess,"before-upload":n.beforeAvatarUpload}},[e("img",{staticStyle:{width:"50px",height:"50px",float:"left"},attrs:{src:n.editForm.pic_url}}),n._v(" "),e("el-button",{staticStyle:{float:"right","margin-left":"15px"},attrs:{size:"small",type:"primary"}},[n._v("点击上传")])],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"商品原价：",prop:"oprice"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.editForm.oprice,callback:function(t){n.$set(n.editForm,"oprice",t)},expression:"editForm.oprice"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品现价：",prop:"nprice"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.editForm.nprice,callback:function(t){n.$set(n.editForm,"nprice",t)},expression:"editForm.nprice"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品库存：",prop:"stock"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.editForm.stock,callback:function(t){n.$set(n.editForm,"stock",t)},expression:"editForm.stock"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"描述：",prop:"desc"}},[e("el-input",{attrs:{type:"textarea",rows:2,"auto-complete":"off"},model:{value:n.editForm.depict,callback:function(t){n.$set(n.editForm,"depict",t)},expression:"editForm.depict"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"规则：",prop:"rule"}},[e("el-input",{attrs:{type:"textarea",rows:2,"auto-complete":"off"},model:{value:n.editForm.rule,callback:function(t){n.$set(n.editForm,"rule",t)},expression:"editForm.rule"}})],1)],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(t){n.editFormVisible=!1}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary",loading:n.editLoading},nativeOn:{click:function(t){return n.editSubmit(t)}}},[n._v("提交")])],1)],1),n._v(" "),e("el-dialog",{attrs:{title:"新增商品",visible:n.addFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){n.addFormVisible=t}}},[e("el-form",{ref:"addForm",attrs:{model:n.addForm,"label-width":"120px",rules:n.addFormRules}},[e("el-form-item",{attrs:{label:"商品缩略图：",prop:"small_url"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadImage,data:n.uploaddata,"show-file-list":!1,"on-success":n.small_urlSuccess,"before-upload":n.beforeAvatarUpload}},[e("img",{staticStyle:{width:"50px",height:"50px",float:"left"},attrs:{src:n.addForm.small_url}}),n._v(" "),e("el-button",{staticStyle:{float:"right","margin-left":"15px"},attrs:{size:"small",type:"primary"}},[n._v("点击上传")])],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"商品详情图：",prop:"pic_url"}},[e("el-upload",{staticClass:"avatar-uploader",attrs:{action:n.uploadImage,data:n.uploaddata,"show-file-list":!1,"on-success":n.pic_urlSuccess,"before-upload":n.beforeAvatarUpload}},[e("img",{staticStyle:{width:"50px",height:"50px",float:"left"},attrs:{src:n.addForm.pic_url}}),n._v(" "),e("el-button",{staticStyle:{float:"right","margin-left":"15px"},attrs:{size:"small",type:"primary"}},[n._v("点击上传")])],1)],1),n._v(" "),e("el-form-item",{attrs:{label:"选择优惠券："}},[e("el-select",{attrs:{placeholder:"请选择优惠券",multiple:!1,filterable:"",remote:"","remote-method":n.remoteCard,loading:n.loading,clearable:""},on:{"visible-change":n.clickCard},model:{value:n.addForm.card_id,callback:function(t){n.$set(n.addForm,"card_id",t)},expression:"addForm.card_id"}},n._l(n.optionsCard,function(n){return e("el-option",{key:n.wxcard_id,attrs:{value:n.wxcard_id,label:n.title}})}))],1),n._v(" "),e("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.addForm.name,callback:function(t){n.$set(n.addForm,"name",t)},expression:"addForm.name"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品原价：",prop:"oprice"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.addForm.oprice,callback:function(t){n.$set(n.addForm,"oprice",t)},expression:"addForm.oprice"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品现价：",prop:"nprice"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.addForm.nprice,callback:function(t){n.$set(n.addForm,"nprice",t)},expression:"addForm.nprice"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"商品库存：",prop:"stock"}},[e("el-input",{staticStyle:{width:"50%"},attrs:{"auto-complete":"off"},model:{value:n.addForm.stock,callback:function(t){n.$set(n.addForm,"stock",t)},expression:"addForm.stock"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"描述：",prop:"desc"}},[e("el-input",{attrs:{type:"textarea",rows:2,"auto-complete":"off"},model:{value:n.addForm.desc,callback:function(t){n.$set(n.addForm,"desc",t)},expression:"addForm.desc"}})],1),n._v(" "),e("el-form-item",{attrs:{label:"规则：",prop:"rule"}},[e("el-input",{attrs:{type:"textarea",rows:2,"auto-complete":"off"},model:{value:n.addForm.rule,callback:function(t){n.$set(n.addForm,"rule",t)},expression:"addForm.rule"}})],1)],1),n._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{nativeOn:{click:function(t){n.addFormVisible=!1}}},[n._v("取消")]),n._v(" "),e("el-button",{attrs:{type:"primary",loading:n.addLoading},nativeOn:{click:function(t){return n.addSubmit(t)}}},[n._v("提交")])],1)],1)],1)},c=[],u={render:d,staticRenderFns:c},m=u,p=e("VU/8"),f=a,g=p(s,m,!1,f,"data-v-40948276",null);t.default=g.exports},"8YoK":function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},ljps:function(n,t,e){var a=e("8YoK");"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);e("rjj0")("62add5e5",a,!0,{})}});