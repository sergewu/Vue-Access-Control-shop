webpackJsonp([40],{"7MhG":function(n,e,t){e=n.exports=t("FZ+f")(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},U6nB:function(n,e,t){var i=t("7MhG");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("6e74a380",i,!0,{})},"V8+P":function(n,e,t){"use strict";function i(n){t("U6nB")}Object.defineProperty(e,"__esModule",{value:!0});var o=(t("yt7g"),t("S49b")),a={data:function(){return{filters:{printname:""},users:[],total:1,page:1,listLoading:!1,editFormVisible:!1,editLoading:!1,editFormRules:{audioName:[{required:!0,message:"请输入名称",trigger:"blur"}],audioId:[{required:!0,message:"请输入ID",trigger:"blur"}],store:[{required:!0,type:"number",message:"请选择款台",trigger:"change"}]},editForm:{id:"",audioName:"",audioId:"",emp:"",store:""},addFormVisible:!1,addLoading:!1,loading:!1,loadingEmp:!1,addFormRules:{audioName:[{required:!0,message:"请输入名称",trigger:"blur"}],audioId:[{required:!0,message:"请输入ID",trigger:"blur"}],store:[{required:!0,type:"number",message:"请选择款台",trigger:"change"}]},addForm:{audioName:"",audioId:"",emp:"",store:""},optionStore:[],optionEmp:[],optionEditStore:[],optionEditEmp:[]}},methods:{clickEditEmp:function(n){var e=this;if(n){var t={storeId:String(this.editForm.store),ename:""};Object(o._46)(t).then(function(n){var t=(n.status,n.data);e.optionEditEmp=t.emplyeeList})}},remoteEditEmp:function(n){var e=this;""!==n?(this.loading=!0,setTimeout(function(){e.loading=!1,Object(o._46)({ename:String(n),storeId:String(e.editForm.store)}).then(function(n){var t=(n.status,n.data);e.optionEditEmp=t.emplyeeList})},200)):this.optionEditEmp=[]},clickEditShop:function(n){var e=this;n&&(this.editForm.emp="",Object(o._48)().then(function(n){var t=(n.status,n.data);e.optionEditStore=t.storeList}))},remoteEditShop:function(n){var e=this;""!==n?(this.loading=!0,setTimeout(function(){e.loading=!1,Object(o._48)({sname:String(n)}).then(function(n){var t=(n.status,n.data);e.optionEditStore=t.storeList})},200)):this.optionEditStore=[]},clickEmp:function(n){var e=this;if(n){var t={storeId:String(this.addForm.store),ename:""};Object(o._46)(t).then(function(n){var t=(n.status,n.data);e.optionEmp=t.emplyeeList})}},remoteEmp:function(n){var e=this;""!==n?(this.loading=!0,setTimeout(function(){e.loading=!1,Object(o._46)({ename:n,storeId:String(e.addForm.store)}).then(function(n){var t=(n.status,n.data);e.optionEmp=t.emplyeeList})},200)):this.optionEmp=[]},clickShop:function(n){var e=this;n&&Object(o._48)().then(function(n){var t=(n.status,n.data);e.optionStore=t.storeList})},remoteShop:function(n){var e=this;""!==n?(this.loading=!0,setTimeout(function(){e.loading=!1,Object(o._48)({sname:n}).then(function(n){var t=(n.status,n.data);e.optionStore=t.storeList})},200)):this.optionStore=[]},clickSlider:function(n,e){var t=this,i={id:String(e.id),vol:String(e.pnum)};Object(o._81)(i).then(function(n){var e=n.status,i=n.message;200!=e&&(t.$message.error(i),t.getUsers())})},test:function(n,e){var t=this;this.$confirm("此操作将修改款台状态, 确定修改?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",closeOnClickModal:!1,type:"warning"}).then(function(){var n={printId:String(e.id),isOpen:1==e.isOpen?"1":0==e.isOpen?"0":"未知"};Object(o._65)(n).then(function(n){var e=n.status;n.message;200==e?t.$message({type:"success",message:"修改成功!"}):t.getUsers()})}).catch(function(){t.getUsers(),t.$message({type:"info",message:"取消修改"})})},handleCurrentChange:function(n){this.page=n,this.getList()},getUsers:function(){this.page=1,this.getList()},getList:function(){var n=this,e={pageNum:this.page,printname:this.filters.printname};this.listLoading=!0,Object(o._10)(e).then(function(e){var t=e.status;e.message;if(200==t){n.total=e.data.totalCount,n.users=e.data.printList;for(var i,o=0;o<n.users.length;o++)i=n.users[o],1==i.isOpen?i.isOpen=!0:i.isOpen=!1}n.listLoading=!1})},handleEdit:function(n,e){this.editFormVisible=!0,this.editForm.audioName=e.printname,this.editForm.audioId=e.machineCode,this.editForm.id=e.id,this.optionEditStore=[{id:e.storeId,value:e.sname}],this.editForm.store=e.storeId,this.optionEditEmp=[{eid:e.eid,value:e.ename}],this.editForm.emp=0==e.eid?"":e.eid},handleAdd:function(){this.addFormVisible=!0},editSubmit:function(){var n=this;this.$refs.editForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){n.editLoading=!0,console.log(n.editForm.emp);var e={id:String(n.editForm.id),eid:String(n.editForm.emp),audioName:n.editForm.audioName,audioId:n.editForm.audioId,storeId:String(n.editForm.store)};Object(o._54)(e).then(function(e){n.editLoading=!1;var t=e.status,i=e.message;200==t&&n.$notify({title:"成功",message:i,type:"success"}),n.$refs.editForm.resetFields(),n.editFormVisible=!1,n.getUsers()})})})},addSubmit:function(){var n=this;this.$refs.addForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){n.addLoading=!0;var e={eid:String(n.addForm.emp),audioName:n.addForm.audioName,audioId:n.addForm.audioId,storeId:String(n.addForm.store)};Object(o.a)(e).then(function(e){var t=e.status,i=e.message;200==t&&(n.addLoading=!1,n.$notify({title:"成功",message:i,type:"success"}),n.$refs.addForm.resetFields(),n.addFormVisible=!1,n.getUsers())})})})}},mounted:function(){this.getUsers()}},r=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",[t("el-row",[t("el-form",{attrs:{inline:!0,model:n.filters}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入喇叭名称"},model:{value:n.filters.printname,callback:function(e){n.$set(n.filters,"printname",e)},expression:"filters.printname"}})],1),n._v(" "),t("el-form-item",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.getUsers}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.handleAdd}},[n._v("新增")])],1)],1)],1),n._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}]},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:n.users,border:"","highlight-current-row":""}},[t("el-table-column",{attrs:{prop:"printname",label:"喇叭名称","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"machineCode",label:"喇叭ID","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{label:"状态"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-switch",{attrs:{name:"value"},on:{change:function(t){n.test(e.$index,e.row)}},model:{value:e.row.isOpen,callback:function(t){n.$set(e.row,"isOpen",t)},expression:"scope.row.isOpen"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"音量","min-width":"160"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-slider",{on:{change:function(t){n.clickSlider(e.$index,e.row)}},model:{value:e.row.pnum,callback:function(t){n.$set(e.row,"pnum",t)},expression:"scope.row.pnum"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"操作",width:"90"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){n.handleEdit(e.$index,e.row)}}},[n._v("修改")])]}}])})],1)],1),n._v(" "),t("el-row",[t("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","page-size":20,total:n.total,background:""},on:{"current-change":n.handleCurrentChange}})],1),n._v(" "),t("el-dialog",{attrs:{title:"打印配置修改",visible:n.editFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){n.editFormVisible=e}}},[t("el-form",{ref:"editForm",attrs:{model:n.editForm,"label-width":"90px",rules:n.editFormRules,"label-position":"right"}},[t("el-form-item",{attrs:{label:"喇叭名称",prop:"audioName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.audioName,callback:function(e){n.$set(n.editForm,"audioName",e)},expression:"editForm.audioName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"喇叭ID",prop:"audioId"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.audioId,callback:function(e){n.$set(n.editForm,"audioId",e)},expression:"editForm.audioId"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择门店",prop:"store"}},[t("el-select",{attrs:{placeholder:"请选择门店",multiple:!1,filterable:"",remote:"","remote-method":n.remoteEditShop,loading:n.loading,clearable:""},on:{"visible-change":n.clickEditShop},model:{value:n.editForm.store,callback:function(e){n.$set(n.editForm,"store",e)},expression:"editForm.store"}},n._l(n.optionEditStore,function(n){return t("el-option",{key:n.id,attrs:{value:n.id,label:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"选择款台"}},[t("el-select",{attrs:{placeholder:"请选择款台",multiple:!1,filterable:"",remote:"","remote-method":n.remoteEditEmp,loading:n.loadingEmp,clearable:""},on:{"visible-change":n.clickEditEmp},model:{value:n.editForm.emp,callback:function(e){n.$set(n.editForm,"emp",e)},expression:"editForm.emp"}},n._l(n.optionEditEmp,function(n){return t("el-option",{key:n.eid,attrs:{value:n.eid,label:n.value}})})),n._v(" "),t("el-tag",{attrs:{type:"warning"}},[n._v("注：不选默认该门店下所有款台")])],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){n.editFormVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",loading:n.editLoading},nativeOn:{click:function(e){return n.editSubmit(e)}}},[n._v("提交")])],1)],1),n._v(" "),t("el-dialog",{attrs:{title:"新增喇叭",visible:n.addFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){n.addFormVisible=e}}},[t("el-form",{ref:"addForm",attrs:{model:n.addForm,"label-width":"90px",rules:n.addFormRules,"label-position":"right"}},[t("el-form-item",{attrs:{label:"喇叭名称",prop:"audioName"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.addForm.audioName,callback:function(e){n.$set(n.addForm,"audioName",e)},expression:"addForm.audioName"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"喇叭ID",prop:"audioId"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.addForm.audioId,callback:function(e){n.$set(n.addForm,"audioId",e)},expression:"addForm.audioId"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择门店",prop:"store"}},[t("el-select",{attrs:{placeholder:"请选择门店",multiple:!1,filterable:"",remote:"","remote-method":n.remoteShop,loading:n.loading,clearable:""},on:{"visible-change":n.clickShop},model:{value:n.addForm.store,callback:function(e){n.$set(n.addForm,"store",e)},expression:"addForm.store"}},n._l(n.optionStore,function(n){return t("el-option",{key:n.id,attrs:{value:n.id,label:n.value}})}))],1),n._v(" "),t("el-form-item",{attrs:{label:"选择款台"}},[t("el-select",{attrs:{placeholder:"请选择款台",multiple:!1,filterable:"",remote:"","remote-method":n.remoteEmp,loading:n.loadingEmp,clearable:""},on:{"visible-change":n.clickEmp},model:{value:n.addForm.emp,callback:function(e){n.$set(n.addForm,"emp",e)},expression:"addForm.emp"}},n._l(n.optionEmp,function(n){return t("el-option",{key:n.eid,attrs:{value:n.eid,label:n.value}})})),n._v(" "),t("el-tag",{attrs:{type:"warning"}},[n._v("注：不选默认该门店下所有款台")])],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){n.addFormVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",loading:n.addLoading},nativeOn:{click:function(e){return n.addSubmit(e)}}},[n._v("提交")])],1)],1)],1)},s=[],d={render:r,staticRenderFns:s},l=d,m=t("VU/8"),u=i,c=m(a,l,!1,u,"data-v-19c684ca",null);e.default=c.exports}});