webpackJsonp([32],{DPti:function(n,t,e){"use strict";function i(n){e("XQHB")}Object.defineProperty(t,"__esModule",{value:!0});var a=e("woOf"),r=e.n(a),s=(e("yt7g"),e("S49b")),l={data:function(){return{pickerOptions1:{disabledDate:function(n){return n.getTime()>Date.now()||n.getTime()<Date.now()-7776e6}},pickerOptions2:{disabledDate:function(n){return n.getTime()>Date.now()||n.getTime()<Date.now()-7776e6}},loading:!1,filters:{parag:"",time1:Date(),time2:Date()},whole:{sumAmt:"",countRow:""},options:[],total:0,page:1,users:[],listLoading:!1}},methods:{handleCurrentChange:function(n){this.page=n,this.getUsers()},clickShop:function(){var n=this;Object(s._48)().then(function(t){var e=(t.status,t.data);n.options=e.storeList})},remoteShop:function(n){var t=this;""!==n?(this.loading=!0,setTimeout(function(){t.loading=!1,Object(s._48)({sname:n}).then(function(n){var e=(n.status,n.data);t.options=e.storeList})},200)):this.options=[]},downExcel:function(n,t){if(""!==this.filters.time1){var e=new Date(this.filters.time1),i=e.getFullYear(),a=e.getMonth()+1,r=e.getDate();a<10&&r<10?(a="0"+a,r="0"+r):a<10?a="0"+a:r<10&&(r="0"+r);var l=i+"-"+a+"-"+r}else this.filters.time1="";if(""!==this.filters.time2){var o=new Date(this.filters.time2),c=o.getFullYear(),m=o.getMonth()+1,u=o.getDate();m<10&&u<10?(m="0"+m,u="0"+u):m<10?m="0"+m:u<10&&(u="0"+u);var p=c+"-"+m+"-"+u}else this.filters.time2="";var d={storeId:this.filters.parag,endTime:p,startTime:l};Object(s.v)(d).then(function(n){var t=n.request.responseURL;window.location.href=t})},getUsers:function(){var n=this;if(""!==this.filters.time1){var t=new Date(this.filters.time1),e=t.getFullYear(),i=t.getMonth()+1,a=t.getDate();i<10&&a<10?(i="0"+i,a="0"+a):i<10?i="0"+i:a<10&&(a="0"+a);var r=e+"-"+i+"-"+a}else this.filters.time1="";if(""!==this.filters.time2){var l=new Date(this.filters.time2),o=l.getFullYear(),c=l.getMonth()+1,m=l.getDate();c<10&&m<10?(c="0"+c,m="0"+m):c<10?c="0"+c:m<10&&(m="0"+m);var u=o+"-"+c+"-"+m}else this.filters.time2="";var p={mid:this.mid,pageNum:this.page,startTime:r,endTime:u,storeId:String(this.filters.parag)};Object(s._0)().then(function(t){var e=t.status;t.message;200==e&&(n.options=t.data.storeList)}),this.listLoading=!0,Object(s.P)(p).then(function(t){t.data,t.message;200==t.status&&(n.total=t.data.totalCount,n.filters.time1=t.data.returnST,n.whole.countRow=t.data.countRow,n.whole.sumAmt=t.data.sumAmt,n.users=t.data.summaryList,n.listLoading=!1)})},handleEdit:function(n,t){this.editFormVisible=!0,this.editForm=r()({},t)},resetForm:function(n){this.$refs[n].resetFields()}},mounted:function(){this.getUsers()}},o=function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("section",[e("el-row",[e("el-form",{attrs:{inline:!0,model:n.whole}},[e("el-tag",{staticStyle:{margin:"10px 10px 20px 0"},attrs:{type:"primary"}},[n._v("交易总金额（元）："+n._s(n.whole.sumAmt)+"元")]),n._v(" "),e("el-tag",{attrs:{type:"primary"}},[n._v("交易总笔数（笔）："+n._s(n.whole.countRow)+"笔")])],1),n._v(" "),e("el-form",{ref:"filters",attrs:{inline:!0,model:n.filters}},[e("el-form-item",{attrs:{prop:"parag"}},[e("el-select",{attrs:{placeholder:"请选择门店名称",multiple:!1,filterable:"",remote:"","remote-method":n.remoteShop,loading:n.loading,clearable:""},on:{"visible-change":n.clickShop},model:{value:n.filters.parag,callback:function(t){n.$set(n.filters,"parag",t)},expression:"filters.parag"}},n._l(n.options,function(n){return e("el-option",{key:n.id,attrs:{value:n.id,label:n.value}})}))],1),n._v(" "),e("el-form-item",{attrs:{prop:"time1"}},[e("el-date-picker",{attrs:{placeholder:"选择开始日期","picker-options":n.pickerOptions1,clearable:!1,editable:!1},model:{value:n.filters.time1,callback:function(t){n.$set(n.filters,"time1",t)},expression:"filters.time1"}})],1),n._v(" "),e("el-form-item",{attrs:{prop:"time2"}},[e("el-date-picker",{attrs:{placeholder:"选择结束日期","picker-options":n.pickerOptions2,clearable:!1,editable:!1},model:{value:n.filters.time2,callback:function(t){n.$set(n.filters,"time2",t)},expression:"filters.time2"}})],1),n._v(" "),e("el-tag",{attrs:{type:"gray"}},[n._v("可查询最近三个月的信息")]),n._v(" "),e("el-form-item",{staticStyle:{float:"right"}},[e("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.getUsers}},[n._v("查询")]),n._v(" "),e("el-button",{attrs:{size:"medium",round:""},on:{click:function(t){n.resetForm("filters")}}},[n._v("重置")]),n._v(" "),e("el-button",{attrs:{type:"text"},on:{click:function(t){n.downExcel()}}},[e("i",{staticClass:"el-icon-date"}),n._v("导出Excel")])],1)],1)],1),n._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}]},[e("el-table",{attrs:{data:n.users,border:"","highlight-current-row":""}},[e("el-table-column",{attrs:{prop:"storeName",label:"门店名称","min-width":"200"}}),n._v(" "),e("el-table-column",{attrs:{prop:"countRow",label:"交易笔数","min-width":"200"}}),n._v(" "),e("el-table-column",{attrs:{prop:"sumAmt",label:"交易金额","min-width":"200"}}),n._v(" "),e("el-table-column",{attrs:{prop:"sumFactorage",label:"手续费","min-width":"200"}}),n._v(" "),e("el-table-column",{attrs:{prop:"sumSur",label:"结算金额","min-width":"200"}})],1)],1),n._v(" "),e("el-row",[e("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","page-size":20,total:n.total,background:""},on:{"current-change":n.handleCurrentChange}})],1)],1)},c=[],m={render:o,staticRenderFns:c},u=m,p=e("VU/8"),d=i,f=p(l,u,!1,d,"data-v-4b79e06e",null);t.default=f.exports},XQHB:function(n,t,e){var i=e("nlWZ");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);e("rjj0")("f876f2a6",i,!0,{})},nlWZ:function(n,t,e){t=n.exports=e("FZ+f")(!1),t.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])}});