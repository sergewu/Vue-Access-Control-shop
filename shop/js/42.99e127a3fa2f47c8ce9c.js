webpackJsonp([42],{"+opH":function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"\n.dialog_title[data-v-0ce996d2] {\n  background: #FF4949;\n  line-height: 25px;\n  font-size: 12px;\n  text-align: center;\n  color: #fff;\n  margin-bottom: 20px;\n  border-radius: 4px;\n}\n",""])},"1bAU":function(e,t,i){"use strict";function r(e){i("flJA")}Object.defineProperty(t,"__esModule",{value:!0});var a=(i("yt7g"),i("S49b")),o={data:function(){return{users:[],total:0,page:1,listLoading:!1,sels:[],editFormVisible:!1,editLoading:!1,editFormRules:{minPrice:[{required:!0,message:"请输入充值金额"},{type:"number",message:"金额必须为数字"}],maxPrice:[{required:!0,message:"请输入充值金额"},{type:"number",message:"金额必须为数字"}],donatePrice:[{required:!0,message:"请输入赠送金额"},{type:"number",message:"金额必须为数字"}]},editForm:{id:"",minPrice:"",maxPrice:"",donatePrice:"",des:""},addFormVisible:!1,addLoading:!1,addFormRules:{minPrice:[{required:!0,message:"请输入金额"},{type:"number",message:"金额必须为数字"}],maxPrice:[{required:!0,message:"请输入充值金额"},{type:"number",message:"金额必须为数字"}],donatePrice:[{required:!0,message:"请输入赠送金额"},{type:"number",message:"金额必须为数字"}]},addForm:{minPrice:"",maxPrice:"",donatePrice:"",des:""}}},methods:{test:function(e,t){var i=this;this.$confirm("此操作将修改门店状态, 确定修改?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,type:"warning"}).then(function(){var e={id:String(t.id),status:1==t.is_open?"Y":0==t.is_open?"N":"未知"};Object(a._56)(e).then(function(e){200==e.status?i.$message({type:"success",message:"修改成功!"}):(i.$message.error("修改失败"),i.getUsers())})}).catch(function(){i.getUsers(),i.$message({type:"info",message:"取消修改"})})},getUsers:function(){var e=this;this.listLoading=!0;var t={status:""};Object(a.E)(t).then(function(t){e.users=t.data.deposiyList,e.listLoading=!1;for(var i,r=0;r<e.users.length;r++)i=e.users[r],"Y"==i.is_open?i.is_open=!0:i.is_open=!1})},handleEdit:function(e,t){this.editFormVisible=!0,this.editForm.id=t.id,this.editForm.minPrice=t.min_price,this.editForm.maxPrice=t.max_price,this.editForm.donatePrice=t.donate_price,this.editForm.des=t.des},handleAdd:function(){this.addFormVisible=!0,this.addForm={cardId:JSON.parse(sessionStorage.getItem("wxcard_id")),minPrice:"",maxPrice:"",donatePrice:"",des:""}},editSubmit:function(){var e=this;this.$refs.editForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.editLoading=!0;var t={id:String(e.editForm.id),minPrice:String(e.editForm.minPrice),maxPrice:String(e.editForm.maxPrice),donatePrice:String(e.editForm.donatePrice),des:e.editForm.des};Object(a._55)(t).then(function(t){e.editLoading=!1;var i=t.status,r=t.message;200==i?(e.$message({message:r,type:"success"}),e.editFormVisible=!1,e.getUsers()):e.$notify.error({message:r})})})})},addSubmit:function(){var e=this;this.$refs.addForm.validate(function(t){t&&e.$confirm("确认提交吗？","提示",{}).then(function(){e.addLoading=!0;var t={cardId:e.addForm.cardId,minPrice:String(e.addForm.minPrice),maxPrice:String(e.addForm.maxPrice),donatePrice:String(e.addForm.donatePrice),des:e.addForm.des};Object(a.U)(t).then(function(t){e.addLoading=!1;var i=t.status,r=t.message;200==i?(e.$message({message:r,type:"success"}),e.addFormVisible=!1,e.getUsers()):e.$notify.error({message:r})})})})}},mounted:function(){this.getUsers()}},s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",[i("el-row",[i("el-form",{attrs:{inline:!0}},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("添加设置")])],1)],1)],1),e._v(" "),i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}]},[i("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.users,"highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"min_price",label:"充值下限(元)"}}),e._v(" "),i("el-table-column",{attrs:{prop:"max_price",label:"充值上限(元)"}}),e._v(" "),i("el-table-column",{attrs:{prop:"donate_price",label:"赠送金额(元)"}}),e._v(" "),i("el-table-column",{attrs:{prop:"is_open",label:"是否启用"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{name:"value"},on:{change:function(i){e.test(t.$index,t.row)}},model:{value:t.row.is_open,callback:function(i){e.$set(t.row,"is_open",i)},expression:"scope.row.is_open"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑",visible:e.editFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.editFormVisible=t}}},[i("div",{staticClass:"dialog_title"},[i("span",[e._v("注意：设置充值区间请不要重叠，以免出现赠送金额不准确。赠送公式为："),i("br"),e._v("最小充值---(大于)---\x3e赠送金额---(小于或者等于)---最大充值金额")])]),e._v(" "),i("el-form",{ref:"editForm",attrs:{model:e.editForm,"label-width":"90px",rules:e.editFormRules}},[i("el-form-item",{attrs:{label:"充值金额",required:""}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"minPrice"}},[i("el-input",{attrs:{placeholder:"最小充值"},model:{value:e.editForm.minPrice,callback:function(t){e.$set(e.editForm,"minPrice",e._n(t))},expression:"editForm.minPrice"}})],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"maxPrice"}},[i("el-input",{attrs:{placeholder:"最大充值"},model:{value:e.editForm.maxPrice,callback:function(t){e.$set(e.editForm,"maxPrice",e._n(t))},expression:"editForm.maxPrice"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"赠送金额",prop:"donatePrice"}},[i("el-col",{attrs:{span:12}},[i("el-input",{attrs:{placeholder:"赠送金额"},model:{value:e.editForm.donatePrice,callback:function(t){e.$set(e.editForm,"donatePrice",e._n(t))},expression:"editForm.donatePrice"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"赠送说明"}},[i("el-input",{attrs:{type:"textarea",placeholder:"赠送说明"},model:{value:e.editForm.des,callback:function(t){e.$set(e.editForm,"des",t)},expression:"editForm.des"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.editFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.editLoading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v("提交")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"充值赠送",visible:e.addFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(t){e.addFormVisible=t}}},[i("div",{staticClass:"dialog_title"},[i("span",[e._v("注意：设置充值区间请不要重叠，以免出现赠送金额不准确。赠送公式为："),i("br"),e._v("最小充值---(大于)---\x3e赠送金额---(小于或者等于)---最大充值金额")])]),e._v(" "),i("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"90px",rules:e.addFormRules}},[i("el-form-item",{attrs:{label:"充值金额",required:""}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"minPrice"}},[i("el-input",{attrs:{placeholder:"最小充值"},model:{value:e.addForm.minPrice,callback:function(t){e.$set(e.addForm,"minPrice",e._n(t))},expression:"addForm.minPrice"}})],1)],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{prop:"maxPrice"}},[i("el-input",{attrs:{placeholder:"最大充值"},model:{value:e.addForm.maxPrice,callback:function(t){e.$set(e.addForm,"maxPrice",e._n(t))},expression:"addForm.maxPrice"}})],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"赠送金额",prop:"donatePrice"}},[i("el-col",{attrs:{span:12}},[i("el-input",{attrs:{placeholder:"赠送金额"},model:{value:e.addForm.donatePrice,callback:function(t){e.$set(e.addForm,"donatePrice",e._n(t))},expression:"addForm.donatePrice"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"赠送说明"}},[i("el-input",{attrs:{type:"textarea",placeholder:"赠送说明"},model:{value:e.addForm.des,callback:function(t){e.$set(e.addForm,"des",t)},expression:"addForm.des"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{nativeOn:{click:function(t){e.addFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary",loading:e.addLoading},nativeOn:{click:function(t){return e.addSubmit(t)}}},[e._v("提交")])],1)],1)],1)},n=[],d={render:s,staticRenderFns:n},l=d,c=i("VU/8"),m=r,u=c(o,l,!1,m,"data-v-0ce996d2",null);t.default=u.exports},flJA:function(e,t,i){var r=i("+opH");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);i("rjj0")("318b6394",r,!0,{})}});