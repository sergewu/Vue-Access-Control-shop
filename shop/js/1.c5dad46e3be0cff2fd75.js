webpackJsonp([1],{"9bBU":function(n,e,t){t("mClu");var i=t("FeBl").Object;n.exports=function(n,e,t){return i.defineProperty(n,e,t)}},C4MV:function(n,e,t){n.exports={default:t("9bBU"),__esModule:!0}},Cn6Q:function(n,e,t){"use strict";function i(n){t("L844")}Object.defineProperty(e,"__esModule",{value:!0});var r=t("bOdI"),a=t.n(r),o=(t("yt7g"),t("S49b")),l={data:function(){var n,e=function(n,e,t){""===e?t(new Error("请输入联系人手机号")):/^1(3|4|5|7|8)\d{9,10}$/.test(e)?t():t(new Error("请输入正确的联系人手机号"))},t=function(n,e,t){""===e?t(new Error("请输入打印份数")):/^\+?[1-9][0-9]*$/.test(e)?t():t(new Error("请输入正确的打印份数"))};return n={querySource:[],source:[],filters:{printname:""},value:"",options:[]},a()(n,"options",[]),a()(n,"startTime",""),a()(n,"endTime",""),a()(n,"users",[]),a()(n,"total",1),a()(n,"page",1),a()(n,"listLoading",!1),a()(n,"detFormVisible",!1),a()(n,"detLoading",!1),a()(n,"stateFormVisible",!1),a()(n,"stateLoading",!1),a()(n,"editFormVisible",!1),a()(n,"editLoading",!1),a()(n,"editFormRules",{printname:[{required:!0,message:"请输入打印机名称",trigger:"blur"},{min:2,max:18,message:"请输入正确的打印机名称",trigger:"blur"}],machineCode:[{required:!0,message:"请输入终端号",trigger:"blur"}],machineKey:[{required:!0,message:"请输入终端密钥",trigger:"blur"}],phone:[{validator:e,trigger:"blur"}],pnum:[{required:!0,message:"请输入打印份数",trigger:"blur"},{validator:t,trigger:"blur"}],value:[{required:!0,message:"请选择款台"}]}),a()(n,"detForm",{}),a()(n,"stateForm",{}),a()(n,"editForm",{value:""}),a()(n,"addFormVisible",!1),a()(n,"addLoading",!1),a()(n,"addFormRules",{printname:[{required:!0,message:"请输入打印机名称",trigger:"blur"},{min:2,max:18,message:"请输入正确的打印机名称",trigger:"blur"}],machineCode:[{required:!0,message:"请输入终端号",trigger:"blur"}],machineKey:[{required:!0,message:"请输入终端密钥",trigger:"blur"}],phone:[{min:11,max:12,message:"请输入正确的手机号码"}],pnum:[{required:!0,message:"请输入打印份数",trigger:"blur"},{validator:t,trigger:"blur"}],value:[{required:!0,message:"请选择款台"}]}),a()(n,"addForm",{value:"",mname:"",username:"",storeName:"",address:"",telephone:"",shopHours:"",startTime:"",endTime:"",pformat:""}),n},methods:{test:function(n,e){var t=this;this.$confirm("此操作将修改款台状态, 确定修改?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",closeOnClickModal:!1,type:"warning"}).then(function(){var n={printId:e.id,isOpen:1==e.isOpen?1:0==e.isOpen?0:"未知"};Object(o._65)(n).then(function(n){200==n.status&&t.$message({type:"success",message:"修改成功!"})})}).catch(function(){t.getUsers(),t.$message({type:"info",message:"取消修改"})})},handleCurrentChange:function(n){this.page=n,this.getList()},getUsers:function(){this.page=1,this.getList()},getList:function(){var n=this,e={pageNum:this.page,printname:this.filters.printname};this.listLoading=!0,Object(o._33)(e).then(function(e){var t=e.status;e.message;if(200==t){n.total=e.data.totalCount,n.users=e.data.printList;for(var i,r=0;r<n.users.length;r++)i=n.users[r],1==i.isOpen?i.isOpen=!0:i.isOpen=!1}n.listLoading=!1})},handleDet:function(n,e){var t=this;this.detFormVisible=!0;var i={printId:e.id};Object(o._32)(i).then(function(n){var e=n.status;n.message;200==e&&(t.detForm=n.data.machine,t.detForm.storeName=n.data.eName)})},handleEdit:function(n,e){this.editFormVisible=!0,this.editForm.printname=e.printname,this.editForm.machineCode=e.machineCode,this.editForm.machineKey=e.machineKey,this.editForm.phone=e.phone,this.editForm.pnum=e.pnum,this.editForm.pformat=e.pformat,this.editForm.isOpen=e.isOpen,this.editForm.id=e.id,this.querySource=[{eid:e.eid,value:e.ename}],this.editForm.value=e.eid},handleAdd:function(){var n=this;this.addFormVisible=!0,Object(o._45)().then(function(e){var t=e.status;e.message;200==t&&(n.options=e.data.empList)}),this.addForm={value:"",storeId:"",username:"",aliOperationId:"",phone:"",email:"",terminal_id:"",options:"",pformat:"店铺名称：${sname}\n款台名称：${ename}\n消费描述：${desc}\n下单时间：${paytime}\n消费金额：${price}\n订单号：${orderid}\n支付方式：${paytype}\n打印时间：${printtime}\n※※※※※※※※※※※※※※※※\n商务热线：029-88445534\n技术支持：西安万鼎网络科技有限公司！"}},editSubmit:function(){var n=this;this.$refs.editForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){n.editLoading=!0;var e={id:n.editForm.id,printname:n.editForm.printname,mCode:n.editForm.machineCode,mKey:n.editForm.machineKey,phone:n.editForm.phone,pnum:n.editForm.pnum,eid:n.editForm.value,pformat:n.editForm.pformat};Object(o._68)(e).then(function(e){n.editLoading=!1;var t=e.status,i=e.message;200==t&&n.$notify({title:"成功",message:i,type:"success"}),n.$refs.editForm.resetFields(),n.editFormVisible=!1,n.getUsers()})})})},addSubmit:function(){var n=this;this.$refs.addForm.validate(function(e){e&&n.$confirm("确认提交吗？","提示",{}).then(function(){n.addLoading=!0;var e={eid:n.addForm.value,printname:n.addForm.printname,mCode:n.addForm.machineCode,mKey:n.addForm.machineKey,phone:n.addForm.phone,pnum:n.addForm.pnum,pformat:n.addForm.pformat};Object(o.f)(e).then(function(e){var t=e.status,i=e.message;200==t&&(n.addLoading=!1,n.$notify({title:"成功",message:i,type:"success"}),n.$refs.addForm.resetFields(),n.addFormVisible=!1,n.getUsers())})})})}},mounted:function(){this.getUsers()}},s=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",[t("el-row",[t("el-form",{attrs:{inline:!0,model:n.filters}},[t("el-form-item",[t("el-input",{attrs:{placeholder:"请输入终端名称"},model:{value:n.filters.printname,callback:function(e){n.$set(n.filters,"printname",e)},expression:"filters.printname"}})],1),n._v(" "),t("el-form-item",{staticStyle:{float:"right"}},[t("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.getUsers}},[n._v("查询")]),n._v(" "),t("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:n.handleAdd}},[n._v("新增")])],1)],1)],1),n._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.listLoading,expression:"listLoading"}]},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:n.users,border:"","highlight-current-row":""}},[t("el-table-column",{attrs:{prop:"printname",label:"打印机名称","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"machineCode",label:"终端号","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"machineKey",label:"终端密钥","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"phone",label:"电话","min-width":"120"}}),n._v(" "),t("el-table-column",{attrs:{prop:"pnum",label:"打印份数"}}),n._v(" "),t("el-table-column",{attrs:{label:"状态"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-switch",{attrs:{name:"value"},on:{change:function(t){n.test(e.$index,e.row)}},model:{value:e.row.isOpen,callback:function(t){n.$set(e.row,"isOpen",t)},expression:"scope.row.isOpen"}})]}}])}),n._v(" "),t("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:n._u([{key:"default",fn:function(e){return[t("el-button",{attrs:{type:"warning",size:"mini"},on:{click:function(t){n.handleEdit(e.$index,e.row)}}},[n._v("修改")]),n._v(" "),t("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(t){n.handleDet(e.$index,e.row)}}},[n._v("详情")])]}}])})],1)],1),n._v(" "),t("el-row",[t("el-pagination",{staticStyle:{"text-align":"center",background:"#fff",padding:"15px"},attrs:{layout:"prev, pager, next","page-size":20,total:n.total,background:""},on:{"current-change":n.handleCurrentChange}})],1),n._v(" "),t("el-dialog",{attrs:{title:"打印详情",visible:n.detFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){n.detFormVisible=e}}},[t("el-form",{ref:"detForm",attrs:{model:n.detForm,"label-width":""}},[t("el-form-item",{attrs:{label:"打印机名称："}},[t("span",[n._v(n._s(n.detForm.printname))])]),n._v(" "),t("el-form-item",{attrs:{label:"终端号："}},[t("span",[n._v(n._s(n.detForm.machineCode))])]),n._v(" "),t("el-form-item",{attrs:{label:"终端密钥："}},[t("span",[n._v(n._s(n.detForm.machineKey))])]),n._v(" "),t("el-form-item",{attrs:{label:"电话："}},[t("span",[n._v(n._s(n.detForm.phone))])]),n._v(" "),t("el-form-item",{attrs:{label:"打印份数"}},[t("span",[n._v(n._s(n.detForm.pnum))])]),n._v(" "),t("el-form-item",{attrs:{label:"所属款台："}},[t("span",[n._v(n._s(n.detForm.storeName))])])],1)],1),n._v(" "),t("el-dialog",{attrs:{title:"打印配置修改",visible:n.editFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){n.editFormVisible=e}}},[t("el-form",{ref:"editForm",attrs:{model:n.editForm,rules:n.editFormRules}},[t("el-form-item",{attrs:{label:"打印机名称",prop:"printname"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.printname,callback:function(e){n.$set(n.editForm,"printname",e)},expression:"editForm.printname"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"终端号",prop:"machineCode"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.machineCode,callback:function(e){n.$set(n.editForm,"machineCode",e)},expression:"editForm.machineCode"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"终端密钥",prop:"machineKey"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.machineKey,callback:function(e){n.$set(n.editForm,"machineKey",e)},expression:"editForm.machineKey"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.phone,callback:function(e){n.$set(n.editForm,"phone",e)},expression:"editForm.phone"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"打印份数",prop:"pnum"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.editForm.pnum,callback:function(e){n.$set(n.editForm,"pnum",e)},expression:"editForm.pnum"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择款台",prop:"value"}},[[t("el-select",{attrs:{placeholder:"请选择款台"},model:{value:n.editForm.value,callback:function(e){n.$set(n.editForm,"value",e)},expression:"editForm.value"}},n._l(n.querySource,function(n){return t("el-option",{key:n.eid,attrs:{label:n.value,value:n.eid}})}))]],2),n._v(" "),t("el-form-item",{attrs:{label:"打印模板\t",prop:"pformat"}},[t("el-input",{attrs:{type:"textarea",rows:6,disabled:!0},model:{value:n.editForm.pformat,callback:function(e){n.$set(n.editForm,"pformat",e)},expression:"editForm.pformat"}})],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){n.editFormVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",loading:n.editLoading},nativeOn:{click:function(e){return n.editSubmit(e)}}},[n._v("提交")])],1)],1),n._v(" "),t("el-dialog",{attrs:{title:"新增打印机",visible:n.addFormVisible,"close-on-click-modal":!1,width:"600px"},on:{"update:visible":function(e){n.addFormVisible=e}}},[t("el-form",{ref:"addForm",attrs:{model:n.addForm,rules:n.addFormRules}},[t("el-form-item",{attrs:{label:"打印机名称",prop:"printname"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.addForm.printname,callback:function(e){n.$set(n.addForm,"printname",e)},expression:"addForm.printname"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"终端号",prop:"machineCode"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.addForm.machineCode,callback:function(e){n.$set(n.addForm,"machineCode",e)},expression:"addForm.machineCode"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"终端密钥",prop:"machineKey"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:n.addForm.machineKey,callback:function(e){n.$set(n.addForm,"machineKey",e)},expression:"addForm.machineKey"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"电话",prop:"phone"}},[t("el-input",{attrs:{"auto-complete":"off",value:"number"},model:{value:n.addForm.phone,callback:function(e){n.$set(n.addForm,"phone",e)},expression:"addForm.phone"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"打印份数",prop:"pnum"}},[t("el-input",{attrs:{"auto-complete":"off",value:"number"},model:{value:n.addForm.pnum,callback:function(e){n.$set(n.addForm,"pnum",e)},expression:"addForm.pnum"}})],1),n._v(" "),t("el-form-item",{attrs:{label:"选择款台",prop:"value"}},[[t("el-select",{attrs:{placeholder:"请选择款台"},model:{value:n.addForm.value,callback:function(e){n.$set(n.addForm,"value",e)},expression:"addForm.value"}},n._l(n.options,function(n){return t("el-option",{key:n.eid,attrs:{label:n.username,value:n.eid}})}))]],2),n._v(" "),t("el-form-item",{attrs:{label:"打印模板\t",prop:"pformat"}},[t("el-input",{attrs:{type:"textarea",rows:6,disabled:!0},model:{value:n.addForm.pformat,callback:function(e){n.$set(n.addForm,"pformat",e)},expression:"addForm.pformat"}})],1)],1),n._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{nativeOn:{click:function(e){n.addFormVisible=!1}}},[n._v("取消")]),n._v(" "),t("el-button",{attrs:{type:"primary",loading:n.addLoading},nativeOn:{click:function(e){return n.addSubmit(e)}}},[n._v("提交")])],1)],1)],1)},m=[],d={render:s,staticRenderFns:m},u=d,p=t("VU/8"),c=i,f=p(l,u,!1,c,"data-v-2dbcd0d2",null);e.default=f.exports},L844:function(n,e,t){var i=t("YSm5");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("784bf048",i,!0,{})},YSm5:function(n,e,t){e=n.exports=t("FZ+f")(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},bOdI:function(n,e,t){"use strict";e.__esModule=!0;var i=t("C4MV"),r=function(n){return n&&n.__esModule?n:{default:n}}(i);e.default=function(n,e,t){return e in n?(0,r.default)(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}},mClu:function(n,e,t){var i=t("kM2E");i(i.S+i.F*!t("+E39"),"Object",{defineProperty:t("evD5").f})}});